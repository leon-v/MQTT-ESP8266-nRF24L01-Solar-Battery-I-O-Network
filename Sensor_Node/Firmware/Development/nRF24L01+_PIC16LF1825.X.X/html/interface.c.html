<HTML>
<HEAD>
<TITLE>Listing of interface.c</TITLE>
<LINK rel=stylesheet href="udf_styles.css" type="text/css">
</HEAD>
<BODY>
<table class="">
<tr><td><code><i>     1</i> </code></td><td><code>&nbsp #include&nbsp&lsaquo  xc.h&rsaquo  </code></td></tr>
<tr><td><code><i>     2</i> </code></td><td><code>&nbsp #include&nbsp "interface.h"</code></td></tr>
<tr><td><code><i>     3</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>     4</i> </code></td><td><code>&nbsp /*&nbsp Delay&nbsp Inerfaces&nbsp */</code></td></tr>
<tr><td><code><i>     5</i> </code></td><td><code>&nbsp void&nbsp delayUs(unsigned&nbsp int&nbsp delay){</code></td></tr>
<tr><td><code><i>     6</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp __delay_us(delay);</code></td></tr>
<tr><td><code><i>     7</i> </code></td><td><code>&nbsp }</code></td></tr>
<tr><td><code><i>     8</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>     9</i> </code></td><td><code>&nbsp void&nbsp delayMs(unsigned&nbsp int&nbsp delay){</code></td></tr>
<tr><td><code><i>    10</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp __delay_ms(delay);</code></td></tr>
<tr><td><code><i>    11</i> </code></td><td><code>&nbsp }</code></td></tr>
<tr><td><code><i>    12</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    13</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    14</i> </code></td><td><code>&nbsp /*&nbsp nrf24l01&nbsp Interfaces&nbsp */</code></td></tr>
<tr><td><code><i>    15</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    16</i> </code></td><td><code>&nbsp void&nbsp nrf24l01InterfaceInit(void){</code></td></tr>
<tr><td><code><i>    17</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp </code></td></tr>
<tr><td><code><i>    18</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp TRISAbits.TRISA0&nbsp =&nbsp 0;&nbsp //&nbsp CE&nbsp out</code></td></tr>
<tr><td><code><i>    19</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp TRISAbits.TRISA1&nbsp =&nbsp 0;&nbsp //&nbsp CS&nbsp out</code></td></tr>
<tr><td><code><i>    20</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp </code></td></tr>
<tr><td><code><i>    21</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp TRISCbits.TRISC1&nbsp =&nbsp 1;&nbsp //MISO</code></td></tr>
<tr><td><code><i>    22</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp TRISCbits.TRISC2&nbsp =&nbsp 0;&nbsp //&nbsp MOSI</code></td></tr>
<tr><td><code><i>    23</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp TRISCbits.TRISC0&nbsp =&nbsp 0;&nbsp //&nbsp CLK</code></td></tr>
<tr><td><code><i>    24</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp </code></td></tr>
<tr><td><code><i>    25</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp SSPCON1bits.SSPEN&nbsp =&nbsp 0;&nbsp </code></td></tr>
<tr><td><code><i>    26</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp SSPCON1bits.CKP&nbsp =&nbsp 0;</code></td></tr>
<tr><td><code><i>    27</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp SSP1STATbits.CKE&nbsp =&nbsp 1;</code></td></tr>
<tr><td><code><i>    28</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp SSPCON1bits.SSPM&nbsp =&nbsp 0b0000;</code></td></tr>
<tr><td><code><i>    29</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp </code></td></tr>
<tr><td><code><i>    30</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp SSPCON1bits.SSPEN&nbsp =&nbsp 1;</code></td></tr>
<tr><td><code><i>    31</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp </code></td></tr>
<tr><td><code><i>    32</i> </code></td><td><code>&nbsp }</code></td></tr>
<tr><td><code><i>    33</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    34</i> </code></td><td><code>&nbsp void&nbsp nrf24l01CELow(void){</code></td></tr>
<tr><td><code><i>    35</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp PORTAbits.RA0&nbsp =&nbsp 0;</code></td></tr>
<tr><td><code><i>    36</i> </code></td><td><code>&nbsp }</code></td></tr>
<tr><td><code><i>    37</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    38</i> </code></td><td><code>&nbsp void&nbsp nrf24l01CEHigh(void){</code></td></tr>
<tr><td><code><i>    39</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp PORTAbits.RA0&nbsp =&nbsp 1;</code></td></tr>
<tr><td><code><i>    40</i> </code></td><td><code>&nbsp }</code></td></tr>
<tr><td><code><i>    41</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    42</i> </code></td><td><code>&nbsp void&nbsp nrf24l01CSLow(void){</code></td></tr>
<tr><td><code><i>    43</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp PORTAbits.RA1&nbsp =&nbsp 0;</code></td></tr>
<tr><td><code><i>    44</i> </code></td><td><code>&nbsp }</code></td></tr>
<tr><td><code><i>    45</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    46</i> </code></td><td><code>&nbsp void&nbsp nrf24l01CSHigh(void){</code></td></tr>
<tr><td><code><i>    47</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp PORTAbits.RA1&nbsp =&nbsp 1;</code></td></tr>
<tr><td><code><i>    48</i> </code></td><td><code>&nbsp }</code></td></tr>
<tr><td><code><i>    49</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    50</i> </code></td><td><code>&nbsp unsigned&nbsp char&nbsp nrf24l01SPISend(unsigned&nbsp char&nbsp data){</code></td></tr>
<tr><td><code><i>    51</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp SSP1BUF&nbsp =&nbsp data;</code></td></tr>
<tr><td><code><i>    52</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp </code></td></tr>
<tr><td><code><i>    53</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp while&nbsp (!SSP1STATbits.BF){</code></td></tr>
<tr><td><code><i>    54</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp NOP();</code></td></tr>
<tr><td><code><i>    55</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>    56</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp </code></td></tr>
<tr><td><code><i>    57</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp return&nbsp SSP1BUF;</code></td></tr>
<tr><td><code><i>    58</i> </code></td><td><code>&nbsp }</code></td></tr>
<tr><td><code><i>    59</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    60</i> </code></td><td><code>&nbsp void&nbsp nrf24l01SPIStart(void){</code></td></tr>
<tr><td><code><i>    61</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp nrf24l01CSLow();</code></td></tr>
<tr><td><code><i>    62</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp delayUs(10);</code></td></tr>
<tr><td><code><i>    63</i> </code></td><td><code>&nbsp }</code></td></tr>
<tr><td><code><i>    64</i> </code></td><td><code>&nbsp </code></td></tr>
<tr><td><code><i>    65</i> </code></td><td><code>&nbsp void&nbsp nrf24l01SPIEnd(void){</code></td></tr>
<tr><td><code><i>    66</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp delayUs(10);</code></td></tr>
<tr><td><code><i>    67</i> </code></td><td><code>&nbsp &nbsp&nbsp&nbsp&nbsp nrf24l01CSHigh();</code></td></tr>
<tr><td><code><i>    68</i> </code></td><td><code>&nbsp }</code></BODY>
</HTML>
